<form (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm" id="contact">
  <div class="form-field">
    <div class="input-wrapper">
      <input
        type="text"
        name="name"
        id="name"
        placeholder=" "
        required
        autocomplete="off"
        [(ngModel)]="contactData.name"
        #name="ngModel"
      />

      <label for="name">Dein Name</label>

      <span class="validation-icon">
        @if (name.valid && (name.dirty || name.touched)) {
        <ng-container>
          <img src="assets/icons/validation_green.png" alt="Valid Icon" />
        </ng-container>
        } @if (name.invalid && (name.dirty || name.touched)) {
        <ng-container>
          <img src="assets/icons/validation_red.png" alt="Invalid Icon" />
        </ng-container>
        }
      </span>
    </div>
    @if (name.invalid && (name.dirty || name.touched)) {
    <span class="error"> Der Name ist erforderlich. </span>
    }
  </div>

  <br />
  <div class="form-field">
    <div class="input-wrapper">
      <input
        type="email"
        name="email"
        id="email"
        required
        autocomplete="off"
        pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}"
        placeholder=" "
        [(ngModel)]="contactData.email"
        #email="ngModel"
      />

      <label for="email">Deine Email</label>

      <span class="validation-icon">
        @if (email.valid && (email.dirty || email.touched)) {
        <ng-container>
          <img src="assets/icons/validation_green.png" alt="Valid Icon" />
        </ng-container>
        } @if (email.invalid && (email.dirty || email.touched)) {
        <ng-container>
          <img src="assets/icons/validation_red.png" alt="Invalid Icon" />
        </ng-container>
        }
      </span>
    </div>

    @if (email.invalid && (email.dirty || email.touched)) {
    <span class="error"> Die Email ist erforderlich. </span>
    } 
  </div>

  <br />

  <div class="form-field">
    <div class="input-wrapper">
      <textarea
        id="message"
        name="message"
        placeholder=" "
        minlength="100"
        required
        [(ngModel)]="contactData.message"
        #message="ngModel"
      ></textarea>

      <label for="message">Deine Nachricht</label>

      <span class="validation-icon-textarea">
        @if (message.valid && (message.dirty || message.touched)) {
        <ng-container>
          <img src="assets/icons/validation_green.png" alt="Valid Icon" />
        </ng-container>
        } @if (message.invalid && (message.dirty || message.touched)) {
        <ng-container>
          <img src="assets/icons/validation_red.png" alt="Invalid Icon" />
        </ng-container>
        }
      </span>
    </div>

    @if (message.errors?.['required'] && (message.dirty || message.touched)) {
    <span class="error"> Die Nachricht ist erforderlich. </span>
    } @if (message.errors?.['minlength'] && (message.dirty || message.touched)){
    <span class="error">
      Die Nachricht muss mindestens 100 Zeichen lang sein.
    </span>
    }
  </div>

  <div
    class="checkbox-wrapper"
    [class.hovered]="isPrivacyHovered"
    [class.checked]="isPrivacyChecked"
    (mouseenter)="isPrivacyHovered = true"
    (mouseleave)="isPrivacyHovered = false"
  >
    <label class="custom-checkbox">
      <div class="checkbox-circle-wrapper">
        <span class="circle-bg" [class.visible]="isPrivacyHovered"></span>

        <input
          type="checkbox"
          id="privacy"
          name="privacy"
          required
          [(ngModel)]="isPrivacyChecked"
        />
        <span
          class="checkbox-box"
          [class.visible]="isPrivacyHovered && !isPrivacyChecked"
        ></span>
      </div>

      Ich habe die
      <a href="/privacy-policy" target="_blank" class="pp"
        >Datenschutzerkl√§rung</a
      >
      gelesen und stimme dem Verarbeiten meiner Daten zu.
    </label>
  </div>

  <div class="btn-container">
    <button class="btn-primary send-btn"><span>Abschicken</span></button>
  </div>
</form>
